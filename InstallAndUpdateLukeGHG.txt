Install and update lukeghg python package in hirsi.in.metla.fi
-------------------------------------------------------------- 
Contents
-------
A Install 'lukeghg' python package in hirsi.in.metla.fi
B  Basic workflow: ghg inventory to CRFReporter xml file
C Update  lukeghg
D Additional notes

The instructions are for "bash" shell.
Your default shell might be for example "tcsh".

To start bash shell type:

prompt% bash

 The "prompt% " denotes your own command prompt.

A Install 'lukeghg' python package in hirsi.in.metla.fi
-----------------------------------------------------

1. Create python virtual environment called 'lukeghg' in your home directory

prompt% cd
prompt% /opt/miniconda3/bin/python -m venv lukeghg --without-pip

2. Activate the virtual environment

prompt% source lukeghg/bin/activate
(lukeghg) prompt%:

Note the '(lukeghg)' appearing in front of your command prompt.

3. Install pip (pip=python install programs)

(lukeghg) prompt%: curl -x 10.88.2.10:8080 https://bootstrap.pypa.io/get-pip.py | python

The address '10.88.2.10:8080' is Luke/Valtori www-proxy.
If for some reason you have connection problems, you can try to type first:

(lukeghg) prompt%: export http_proxy=10.88.2.10:8080
(lukeghg) prompt%: export https_proxy=10.88.2.10:8080

Then try the curl comman again.

4. Deactivate and reactivate virtual environment

This merely to test the the virtual environment is O.K.

(lukeghg) prompt%:deactivate
prompt%: source lukeghg/bin/activate
(lukeghg) prompt%:

5. Install lukeghg python package to the virtual environment

(lukeghg) prompt%: cd /hsan2/khk/ghg/lukeghg/lukeghg
(lukeghg) prompt%: pip --proxy 10.88.2.10:8080 install .

Please note to type the the dot ('.') at the end. Then pip will read the
setup.py file found in the directory.

B.  Basic workflow: ghg inventory to CRFReporter xml file
---------------------------------------------

"run-ghg-master.sh" is a script that sets ghg inventory files,
directories and the xml output file for the current inventory.

Thus, when Luke lukeghg is installed and ghg
inventory files are available the following five step work flow
will generate xml file for CRFReporter:

prompt% bash
prompt%: source ~/lukeghg/bin/activate
(lukeghg) prompt%: run-ghg-master.sh > Import.log 2> Error.log
(lukeghg) prompt%: deactivate
prompt%: exit

The script will run few minutes allowing you to take a coffee break.
The '>' character redirects 'standard out' terminal output to
Import.log file and '2>' redirects 'standard error' output to Error.log file

CRReporter PartyProfile xml file will appear in your working
(i.e. current) directory. This file can be imported to CRFReporter.


C Update lukeghg
----------------


1. Activate the virtual environment. 

prompt% source ~/lukeghg/bin/activate
(lukeghg) prompt%:

2. Update lukeghg

(lukeghg) prompt%: cd /hsan2/khk/ghg/lukeghg/lukeghg
(lukeghg) prompt%: pip --proxy 10.88.2.10:8080 install --upgrade .

Please note to type the the dot ('.') at the end.

D Additional Notes
---------------

The installation of virtual environment will be simple in the future
when python3.4 or later becomes available. hirsi and its operating
system is too old to allow this (information from Valtori).

Version control
------------
The software in lukeghg directory for CRFReporter is in CVS  version control.
You can retrieve it by typing (in your current directory):

         cvs -d redmine.ns.luke.fi:/home/csv checkout lukeghg

Then in lukeghg directory you should see this InstallAndUpdateLukeGHG.txt file.
You should be able to log in to redmine server by giving your Luke network password.
Please note not to override your virtual environment if it is called 'lukeghg'.
  
To update your lukeghg project type
 	
	 cvs update lukeghg

For the use of CVS see the so called "Cederqvist" CVS manual. 
